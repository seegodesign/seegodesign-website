@use "tailwindcss";

@layer components {
  .logo {
    @apply tracking-tight text-2xl;
    span {
      @apply text-[color:var(--brand-primary)];
    }
  }

  .color-overlay {
    @apply absolute inset-0 bg-gradient-to-br from-[#000000]/75 to-[#0e1823]/85;
  }

  .hero {
    @apply relative min-h-screen flex items-center;
    &__bg-container {
      @apply absolute inset-0 overflow-hidden;
    }
    &__headline {
      @apply mb-8 font-semibold leading-tight text-4xl sm:text-6xl md:text-4xl lg:text-6xl text-white;
    }
    &__subhead {
      @apply text-[color:var(--color-text-muted)] text-xl md:text-2xl mb-10 max-w-3xl leading-relaxed;
    }
    &__bg {
      @apply absolute inset-0 bg-cover bg-center bg-no-repeat opacity-80 bg-fixed;
      animation: hero-kenburns 16s ease-in-out infinite;
      transform-origin: center;
      will-change: transform;
    }
    &__overlay {
      @apply absolute inset-0 bg-gradient-to-br from-[#000000]/75 to-[#0e1823]/85;
    }
  }


  .loading-screen {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-[#0e1823];

    &__ring {
      width: 64px;
      height: 64px;
      border-radius: 9999px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-top-color: var(--brand-green);
      animation: loader-spin 1s linear infinite;
    }

    &__text {
      @apply text-xs uppercase text-white/60;
    }
  }

  .eyebrow {
    @apply text-xs uppercase tracking-[0.35em] text-white/55;
  }

  .headline {
    @apply text-4xl md:text-6xl font-semibold text-white mt-4 mb-4;

    span {
      @apply text-[color:var(--brand-primary)];
    }

    &--gradient {
      @apply text-4xl md:text-6xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyan-200 via-sky-300 to-emerald-200 mt-4 mb-4;
    }
  }

  .subhead {
    @apply text-lg text-slate-200 max-w-2xl mb-6;
  }

  .checkout-btn-row {
    @apply mt-10 flex flex-wrap gap-4;

    &__note {
      @apply text-xs max-w-xs text-[color:var(--color-text-muted)];
    }

    &__invite-code {
      @apply mt-2 text-sm text-[color:var(--color-text-muted)] hover:text-[color:var(--brand-primary)] transition-colors;
    }
  }

  .button {
    @apply inline-flex items-center justify-center rounded-full px-7 py-3 text-sm font-semibold uppercase tracking-[0.1em] text-white/90 border border-white/30 transition-all bg-gradient-to-b from-[color:var(--brand-primary-dark)] to-[color:var(--brand-primary-darker)] hover:scale-102 hover:from-[color:var(--brand-primary)] hover:to-[color:var(--brand-primary-dark)] flex-shrink-0;

    &--secondary {
      @apply bg-none border-2 border-white/30 hover:border-white/50 hover:bg-white/10;
    }
  }

  .bullets {
    @apply space-y-3 text-white/75;

    li {
      @apply flex items-start gap-3;

      &::before {
        content: '';
        @apply inline-block mt-2 h-1.5 w-1.5 rounded-full bg-[color:var(--brand-primary)];
      }
    }
  }

  .service-section {
    @apply bg-gradient-to-b from-slate-800/80 to-slate-900/80 min-h-screen flex items-center border-b border-slate-300/20;

    &__headline {
      @apply text-3xl md:text-5xl font-semibold mt-4 mb-4;
    }

    &__description {
      @apply text-lg mb-6;
    }

    &__link {
      @apply inline-flex items-center gap-2 text-[color:var(--brand-primary)] font-semibold hover:text-white transition-colors hover:text-[color:var(--brand-primary-dark)];
    }

    &.inverse {
      @apply bg-none;

      .service-section__headline {
        @apply text-white;
      }

      .service-section__description {
        @apply text-white/90;
      }

      .service-section__link {
        @apply text-white font-semibold hover:underline;
      }
    }
  }

  .questionnaire {
    @apply flex flex-col;

    &__progress {
      @apply w-full h-1;
    }

    &__progress-bar {
      @apply h-1 transition-all duration-500 ease-out bg-[color:var(--brand-primary)];
    }

    &__content {
      @apply flex-1 flex items-center justify-center px-4 py-12 min-h-[800px];
    }

    &__card {
      @apply max-w-2xl w-full;
    }

    &__header {
      @apply mb-10;
    }

    &__eyebrow {
      @apply text-sm mb-4 font-medium;
    }

    &__question {
      @apply text-3xl sm:text-4xl font-semibold;
    }

    &__options {
      @apply space-y-3;
    }

    &__option {
      @apply w-full text-left px-6 py-5 rounded-xl transition-all duration-200 shadow-sm border-white/30 border-1 bg-[color:var(--engine-card-bg)] hover:shadow-md hover:scale-[1.02];
    }

    &__option-label {
      @apply text-lg;
    }

    &__footer {
      @apply flex gap-4 mt-12;
    }

    &__back {
      @apply inline-flex items-center gap-2 px-6 py-3 rounded-lg transition-all;
    }
  }

  .hero-card {
    @apply bg-gradient-to-b from-slate-800/80 to-slate-900/80 border border-white/10 rounded-2xl p-8;

    &--accent {
      @apply rounded-3xl border border-white/10 bg-gradient-to-r from-[color:var(--brand-primary)]/20 via-slate-900/60 to-slate-900/20 px-8 py-12 md:px-12
    }

    &--light-orbs {
      @apply rounded-3xl border border-[color:var(--brand-primary)]/30 bg-gradient-to-br from-[color:var(--brand-primary)]/25 via-slate-900/70 to-slate-900/35 px-8 py-10 md:px-12 shadow-2xl shadow-[0_0_60px_rgba(125,202,47,0.18)];
      &:before {
        content: '';
        @apply pointer-events-none absolute -top-12 right-2 h-48 w-48 rounded-full bg-[radial-gradient(circle,rgba(125,202,47,0.55),transparent_65%)] blur-2xl;
      }
      &:after {
        content: '';
        @apply pointer-events-none absolute -bottom-16 left-2 h-56 w-56 rounded-full bg-[radial-gradient(circle,rgba(74,163,220,0.45),transparent_65%)] blur-2xl;
      }
    }

    &__title {
      @apply text-2xl md:text-4xl font-semibold text-white mt-4 mb-6;
    }

    &__eyebrow {
      @apply text-sm uppercase tracking-[0.3em] text-white/50;
    }

    &__stat {
      @apply text-3xl font-semibold text-white;
    }

    &__stat-words {
      @apply text-sm text-slate-300;
    }

    &__stat-icon {
      @apply h-12 w-12 rounded-full bg-[color:var(--brand-primary)]/20 flex items-center justify-center text-[color:var(--brand-primary)] text-xl font-semibold;
    }

    &__info-bubble {
      @apply rounded-2xl border border-white/10 bg-white/10 px-6 py-5 mb-6;
    }

    &__footer {
      @apply mt-8 border-t border-white/10 pt-6;

      p {
        @apply text-sm text-slate-300;
      }
    }
  }

  .card {
    @apply rounded-2xl border border-white/10 bg-white/5 backdrop-blur-sm p-8 flex flex-col gap-1;

    &--outlined {
      @apply bg-transparent border-white/20;
    }

    &--no-bg {
      @apply border-0 bg-transparent;
    }

    &--gradient {
      @apply bg-gradient-to-b from-transparent to-[color:var(--brand-primary-dark)]/10 backdrop-blur-sm;
    }

    &__highlight {
      @apply border-l-4 border-[color:var(--brand-primary)]/70 pl-5 ml-0 md:ml-4 py-2;
    }

    &__eyebrow {
      @apply text-sm uppercase tracking-[0.1em] text-white/50;
    }

    &__tag {
      @apply text-xs uppercase tracking-[0.35em] text-white/50 mb-3;
    }

    &__eyebrow {
      @apply text-sm uppercase tracking-[0.3em] text-white/50 mb-2;
    }

    &__title {
      @apply text-2xl md:text-3xl font-semibold text-white mb-2;
    }

    &__description {
      @apply text-slate-300 text-base leading-relaxed;
    }

    &__footer {
      @apply flex items-center justify-between flex-wrap gap-4;
    }

    &__tout {
      @apply mt-6 border border-white/10 rounded-xl p-5 bg-slate-900/50;
    }

    &__price {
      @apply text-sm uppercase tracking-[0.3em] text-white/50;
    }

    &__button {
      @apply inline-flex items-center justify-center rounded-full px-6 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:brightness-110 bg-[color:var(--brand-primary-dark)] hover:bg-[color:var(--brand-primary)];
    }
  }

  .scroll-down-arrow {
    @apply mt-16 mx-auto animate-pulse rounded-full bg-white/10 transition-colors p-4 flex flex-col items-center w-12 h-12 justify-center;

    &__icon {
      @apply w-12 h-12 text-[color:var(--brand-primary)] group-hover:text-white transition-colors
    }
  }

  .modal {
    @apply fixed inset-0 z-[70] flex items-center justify-center px-4 py-10;
    opacity: 0;
    pointer-events: none;
    transition: opacity 220ms ease-out;

    &.is-open {
      opacity: 1;
      pointer-events: auto;
    }

    &__backdrop {
      @apply absolute inset-0 bg-slate-950/70 backdrop-blur-sm;
      opacity: 0;
      transition: opacity 220ms ease-out;
    }

    &__panel {
      @apply relative w-full max-w-2xl;
      opacity: 0;
      transform: translateY(8px) scale(0.98);
      transition: opacity 240ms ease-out, transform 240ms ease-out;
    }

    &__panel--medium {
      @apply max-w-md;
    }

    &__panel--wide {
      @apply max-w-3xl;
    }

    &__close {
      @apply absolute right-4 top-4 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/20 text-white/70 transition-colors hover:border-white/40 hover:text-white hover:bg-white/10;
    }
  }

  .testimonials {
    @apply relative py-16 md:py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-slate-900/80 to-slate-800/80 border-t border-slate-300/20;

    &__inner {
      @apply max-w-6xl mx-auto;
    }

    &__header {
      @apply mb-10;
    }

    &__headline {
      @apply text-3xl md:text-5xl font-semibold text-white;
    }

    &__subhead {
      @apply text-base md:text-lg text-slate-300 mt-4;
    }

    &__header-row {
      @apply flex flex-col gap-6 md:flex-row md:items-end md:justify-between;
    }

    &__controls {
      @apply flex items-center gap-3;
    }

    &__control {
      @apply inline-flex items-center justify-center h-11 w-11 rounded-full border border-white/20 text-white/80 transition-colors hover:text-white hover:border-white/50 hover:bg-white/5;
    }

    &__carousel {
      @apply overflow-hidden;
    }

    &__track {
      @apply flex transition-transform duration-500 ease-out;
    }

    &__slide {
      @apply min-w-full grid gap-6 md:grid-cols-3;
    }

    &__item {
      @apply flex flex-col gap-4 h-full;
    }

    &__card {
      @apply w-full flex-1 rounded-2xl border border-white/10 bg-gradient-to-b from-white/20 to-white/5 p-8 shadow-xs shadow-black/30 flex flex-col gap-6 relative overflow-hidden;
    }

    &__card--bubble {
      @apply relative;
    }

    &__card--bubble::before {
      content: '';
      position: absolute;
      top: -40%;
      left: -120%;
      width: 60%;
      height: 180%;
      transform: rotate(18deg);
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.08),
        rgba(255, 255, 255, 0.2),
        rgba(255, 255, 255, 0.08),
        transparent
      );
      animation: testimonial-sheen 8s ease-in-out infinite;
      opacity: 0.7;
      pointer-events: none;
    }

    &__quote {
      @apply text-sm md:text-base text-slate-200 leading-relaxed;
    }

    &__read-more {
      @apply text-xs uppercase tracking-[0.2em] text-[color:var(--brand-primary)] font-semibold self-start transition-colors hover:underline;
    }

    &__meta {
      @apply px-2;
    }

    &__name {
      @apply text-sm font-semibold text-white;
    }

    &__title {
      @apply text-xs uppercase text-slate-400 mt-2;
    }

    &__dots {
      @apply mt-8 flex items-center justify-center gap-2;
    }

    &__dot {
      @apply h-2.5 w-2.5 rounded-full bg-white/20 transition-colors;
    }

    &__dot.is-active {
      @apply bg-[color:var(--brand-primary)];
    }
  }

  .testimonial-modal {
    @apply w-full rounded-3xl border border-white/10 bg-[color:var(--color-surface-strong)] p-8 shadow-2xl border border-white/10 bg-gradient-to-b from-white/20 to-white/5;

    &__quote {
      @apply text-sm md:text-base text-slate-100 leading-relaxed;
      p {
        @apply mb-6;
      }
    }


    &__meta {
      @apply mt-6;
    }

    &__name {
      @apply text-lg font-semibold;
    }

    &__title {
      @apply text-sm uppercase text-[color:var(--brand-primary)];
    }
  }

  .modal.is-open {
    .modal__backdrop {
      opacity: 1;
    }

    .modal__panel {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .chat-widget {
    @apply fixed bottom-6 right-6 z-[60] flex flex-col bg-[color:var(--color-surface-strong)] rounded-2xl shadow-2xl shadow-black/30 border border-[color:var(--color-border)] backdrop-blur-xl transition-all duration-300 ease-out;
    will-change: transform, opacity;

    &.is-open {
      @apply translate-y-0 scale-100 opacity-100;
    }

    &.is-closed {
      @apply translate-y-5 scale-95 opacity-0 pointer-events-none;
    }

    &--mobile {
      @apply w-full h-full top-0 left-0 right-0 bottom-0 rounded-none;
    }

    &__header {
      @apply flex items-center justify-between px-4 py-4 bg-gradient-to-r from-[color:var(--brand-primary-dark)] to-[color:var(--brand-primary)] rounded-t-2xl;
    }

    &__actions {
      @apply flex items-center gap-2;
    }

    &__title {
      @apply text-white font-semibold text-lg;
    }

    &__subtitle {
      @apply text-white/80 text-xs;
    }

    &__close {
      @apply inline-flex items-center justify-center h-8 w-8 rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-colors;
    }

    &__action {
      @apply inline-flex items-center justify-center h-8 w-8 rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-colors;
    }

    &__messages {
      @apply flex-1 overflow-y-auto p-4 space-y-4 bg-[color:var(--color-bg)];
      scroll-behavior: smooth;

      &::-webkit-scrollbar {
        width: 6px;
      }

      &::-webkit-scrollbar-track {
        background: transparent;
      }

      &::-webkit-scrollbar-thumb {
        background: var(--color-border);
        border-radius: 3px;
      }

      &::-webkit-scrollbar-thumb:hover {
        background: var(--brand-primary);
      }
    }

    &__error {
      @apply px-4 py-2 text-sm text-red-100 bg-red-500/10 border-t border-red-500/30;
    }

    &__input-container {
      @apply flex items-end gap-2 p-4 bg-[color:var(--color-surface-strong)] border-t border-[color:var(--color-border)] rounded-b-2xl;
    }

    &__input {
      @apply flex-1 px-4 py-3 bg-[color:var(--color-surface-muted)] border border-[color:var(--color-border)] rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-[color:var(--brand-primary)] focus:border-transparent text-[color:var(--color-text)] placeholder:text-[color:var(--color-text-muted)];
    }

    &__send {
      @apply inline-flex items-center justify-center h-10 w-10 rounded-lg bg-[color:var(--brand-primary-dark)] text-white hover:bg-[color:var(--brand-primary)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
    }

    &__typing {
      @apply flex items-center gap-2;
    }

    &__typing-dot {
      @apply h-2 w-2 rounded-full bg-[color:var(--color-text-muted)];
      animation: chat-typing 1s ease-in-out infinite;

      &:nth-child(2) {
        animation-delay: 0.2s;
      }

      &:nth-child(3) {
        animation-delay: 0.4s;
      }
    }
  }

  .chat-message {
    @apply flex gap-2;

    &--user {
      @apply justify-end;
    }

    &--assistant {
      @apply justify-start;
    }

    &__bubble {
      @apply px-4 py-3 rounded-2xl max-w-[85%] break-words;

      &--user {
        @apply bg-[color:var(--brand-primary-dark)] text-white rounded-br-sm max-w-[80%];
      }

      &--assistant {
        @apply bg-[color:var(--color-surface)] border border-[color:var(--color-border)] text-[color:var(--color-text)] rounded-bl-sm max-w-[85%];
      }
    }

    &__timestamp {
      @apply text-xs text-[color:var(--color-text-muted)] mt-1;
    }
  }

  .chat-button {
    @apply fixed bottom-6 right-6 z-[60] inline-flex items-center justify-center h-14 w-14 md:h-16 md:w-16 rounded-full bg-[color:var(--brand-primary-dark)] text-white shadow-2xl shadow-black/30 hover:bg-[color:var(--brand-primary)] hover:scale-110 transition-all duration-200;

    &__badge {
      @apply absolute -top-1 -right-1 h-4 w-4 rounded-full bg-red-500 border-2 border-white;
    }
  }

  .theme-toggle__icon {
    display: none;
  }

  [data-theme='dark'] .theme-toggle__icon--dark,
  [data-theme='light'] .theme-toggle__icon--light {
    display: inline-flex;
  }

  .form {
    &__field {
      @apply w-full px-4 py-3 border border-[color:var(--color-border)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--brand-primary)] focus:border-transparent bg-[color:var(--color-surface-muted)];
    }
  }

  .footer {
    @apply py-8 px-4 sm:px-6 lg:px-8
  }
}

@media (min-width: 768px) {
  .chat-widget {
    &--mobile {
      @apply w-96 h-[600px] top-auto left-auto bottom-6 right-6 rounded-2xl;
    }
  }
}

@media (max-width: 767px) {
  .chat-widget {
    &.is-closed {
      transform: translateY(100%);
      opacity: 0;
    }

    &.is-open {
      transform: translateY(0);
      opacity: 1;
    }

    &__header,
    &__input-container {
      @apply rounded-none;
    }
  }
}

@media (prefers-reduced-motion: reduce) {
  .chat-widget {
    transition: none;

    &.is-closed {
      transform: none;
    }
  }
}

@keyframes chat-typing {
  0%,
  100% {
    transform: translateY(0);
    opacity: 0.4;
  }

  50% {
    transform: translateY(-2px);
    opacity: 1;
  }
}
